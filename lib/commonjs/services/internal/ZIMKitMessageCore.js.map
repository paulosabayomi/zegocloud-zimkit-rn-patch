{"version":3,"names":["_zegoZimReactNative","_interopRequireDefault","require","e","__esModule","default","ZIMKitMessageCore","constructor","peerMessages","Map","groupMessages","messages","messageCount","messageListChangedCallback","preMessageSendingCallback","getInstance","instance","getMessageList","conversationID","conversationType","config","nextMessage","undefined","count","reverse","ZIM","queryHistoryMessage","then","messageList","console","log","set","catch","err","onMessageListChanged","callback","offMessageListChanged","onPreMessageSending","loadMoreMessage","_this$messages$get","currentMessageList","get","length","_this$messages$get2","sendTextMessage","text","onMessageSent","_this$messages$get3","message","type","callbackMessage","toConversationID","priority","pushConfig","title","content","extendedData","messageTextObj","_this","notification","onMessageAttached","push","sendMessage","forEach","sentStatus","finally","exports"],"sourceRoot":"../../../../src","sources":["services/internal/ZIMKitMessageCore.js"],"mappings":"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","ignoreList":[]}