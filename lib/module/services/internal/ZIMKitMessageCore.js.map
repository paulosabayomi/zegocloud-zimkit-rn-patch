{"version":3,"names":["ZIM","ZIMKitMessageCore","constructor","peerMessages","Map","groupMessages","messages","messageCount","messageListChangedCallback","preMessageSendingCallback","getInstance","instance","getMessageList","conversationID","conversationType","config","nextMessage","undefined","count","reverse","queryHistoryMessage","then","messageList","console","log","set","catch","err","onMessageListChanged","callback","offMessageListChanged","onPreMessageSending","loadMoreMessage","_this$messages$get","currentMessageList","get","length","_this$messages$get2","sendTextMessage","text","onMessageSent","_this$messages$get3","message","type","callbackMessage","toConversationID","priority","pushConfig","title","content","extendedData","messageTextObj","_this","notification","onMessageAttached","push","sendMessage","forEach","sentStatus","finally"],"sourceRoot":"../../../../src","sources":["services/internal/ZIMKitMessageCore.js"],"mappings":"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","ignoreList":[]}